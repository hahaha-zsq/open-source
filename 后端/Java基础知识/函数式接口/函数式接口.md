# ğŸš€ Java å‡½æ•°å¼æ¥å£è¯¦è§£ï¼šä»å…¥é—¨åˆ°ç²¾é€š

> ğŸ’¡ å‡½æ•°å¼æ¥å£æ˜¯ Java 8 å¼•å…¥çš„é‡è¦ç‰¹æ€§ï¼Œå®ƒä¸º Lambda è¡¨è¾¾å¼å’Œå‡½æ•°å¼ç¼–ç¨‹æä¾›äº†å¼ºå¤§çš„æ”¯æŒã€‚æœ¬æ–‡è¯¦ç»†ä»‹ç»äº†Javaä¸­çš„å››ç§ä¸»è¦å‡½æ•°å¼æ¥å£ï¼šFunctionã€Consumerã€Supplierå’ŒPredicateï¼ŒåŒ…æ‹¬å®ƒä»¬çš„æ¥å£è¯´æ˜ã€åº”ç”¨ç¤ºä¾‹ä»¥åŠè¿›é˜¶ä½¿ç”¨æŠ€å·§ã€‚

---

## ğŸ¯ ä»€ä¹ˆæ˜¯å‡½æ•°å¼æ¥å£

### å®šä¹‰
**å‡½æ•°å¼æ¥å£ï¼ˆFunctional Interfaceï¼‰** æ˜¯åªæœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•çš„æ¥å£ï¼Œä½†æ˜¯å¯ä»¥æœ‰å¤šä¸ªéæŠ½è±¡æ–¹æ³•ã€‚å‡½æ•°å¼æ¥å£å¯ä»¥è¢«éšå¼çš„è½¬æ¢ä¸ºLambdaè¡¨è¾¾å¼ï¼ŒåŸºäºè¿™ä¸ªç‰¹æ€§å°±å¯ä»¥å®ç°**ç›´æ¥å°†å‡½æ•°ä½œä¸ºæ•°æ®è¿›è¡Œä¼ é€’**ã€‚

### å…³é”®ç‰¹å¾
- âœ… åªèƒ½æœ‰ä¸€ä¸ªæŠ½è±¡æ–¹æ³•
- âœ… å¯ä»¥æœ‰é»˜è®¤æ–¹æ³•ï¼ˆdefault methodsï¼‰
- âœ… å¯ä»¥æœ‰é™æ€æ–¹æ³•ï¼ˆstatic methodsï¼‰
- âœ… å¯ä»¥æœ‰ Object ç±»çš„æ–¹æ³•

### æ³¨è§£è¯´æ˜
é€šè¿‡æ£€æŸ¥è¯¥æ¥å£æ˜¯å¦æœ‰ `@FunctionalInterface` æ³¨è§£ï¼Œåˆ¤æ–­è¯¥æ¥å£æ˜¯å¦æ˜¯ä¸€ä¸ªå‡½æ•°å¼æ¥å£ï¼š
- å¦‚æœæ˜¯ï¼Œç¼–è¯‘é€šè¿‡
- å¦‚æœä¸æ˜¯ï¼Œåˆ™ç¼–è¯‘å¤±è´¥

### åŸºæœ¬ç¤ºä¾‹

```java
@FunctionalInterface
public interface MyFunctionalInterface {
    // å”¯ä¸€çš„æŠ½è±¡æ–¹æ³•
    void doSomething(String message);
    
    // é»˜è®¤æ–¹æ³•ï¼ˆå…è®¸ï¼‰
    default void doSomethingElse() {
        System.out.println("Default implementation");
    }
    
    // é™æ€æ–¹æ³•ï¼ˆå…è®¸ï¼‰
    static void utilityMethod() {
        System.out.println("Utility method");
    }
}
```

**å‡½æ•°å¼æ¥å£çš„ä½œç”¨å°±åƒæ˜¯å­˜æ“ä½œçš„å®¹å™¨ï¼Œå®ƒçš„æŠ½è±¡æ–¹æ³•ç”¨æ¥æ¥æ”¶å‚æ•°ç„¶åè®©å°è£…çš„æ“ä½œæ¥å¤„ç†ï¼Œæˆ–è€…ç”¨æ¥è·å–æ“ä½œåçš„ç»“æœã€‚**

---

## ğŸ”— æ–¹æ³•å¼•ç”¨

å‡½æ•°å¼æ¥å£å¸¸å¸¸ç”± Lambda è¡¨è¾¾å¼æ¥å®ç°ï¼Œç”¨æ–¹æ³•å¼•ç”¨æ¥ç®€åŒ– Lambda è¡¨è¾¾å¼çš„ä¸»ä½“éƒ¨åˆ†ï¼Œä¸”**ä½¿ç”¨æ–¹æ³•å¼•ç”¨çš„æ¥å£å¿…é¡»æ˜¯å‡½æ•°å¼æ¥å£**ã€‚

### æ–¹æ³•å¼•ç”¨çš„å››ç§å¸¸è§å½¢å¼

1. **ç±»å::é™æ€æ–¹æ³•**
2. **å¯¹è±¡å::å®ä¾‹æ–¹æ³•**
3. **ç±»å::new**
4. **æ•°ç»„::new**

### ç‰¹æ®Šå½¢å¼ï¼šç±»å::å®ä¾‹æ–¹æ³•

è¿™ç§ç‰¹æ®Šçš„ä½¿ç”¨åœºæ™¯æ˜¯åœ¨åµŒå¥—å‡½æ•°ä¸­ï¼Œå¤–å±‚æä¾›çš„å‚æ•°åˆšå¥½æ˜¯å†…å±‚æ‰€éœ€çš„å‚æ•°ï¼Œä¸”å®ç°çš„æ“ä½œä¹Ÿæ˜¯æ­¤ç±»ä¸­ç°æœ‰çš„æ–¹æ³•ã€‚

### å®é™…ç¤ºä¾‹

```java
public class MethodReferenceExample {
    public static void main(String[] args) {
        // åŸæ–¹æ³•ï¼šä½¿ç”¨Lambdaè¡¨è¾¾å¼
        List<User> users = new ArrayList<>();
        List<String> names1 = users.stream()
                                  .map(user -> user.getName())
                                  .collect(Collectors.toList());
        
        // ä¼˜åŒ–åï¼šä½¿ç”¨æ–¹æ³•å¼•ç”¨
        List<String> names2 = users.stream()
                                  .map(User::getName)
                                  .collect(Collectors.toList());
    }
}

class User {
    private String name;
    
    public String getName() {
        return name;
    }
}
```

---

## ğŸ”§ Function æ¥å£è¯¦è§£

### 3.1 æ¥å£è¯´æ˜

`Function<T,R>` æ¥å£æ¥æ”¶ä¸€ä¸ªå‚æ•°å¹¶ä¸”äº§ç”Ÿä¸€ä¸ªç»“æœï¼š
- ç¬¬ä¸€ä¸ªå‚æ•°ç±»å‹ `T` ä»£è¡¨å…¥å‚
- ç¬¬äºŒä¸ªå‚æ•°ç±»å‹ `R` ä»£è¡¨è¿”å›çš„ç»“æœ
- æ ¸å¿ƒæ–¹æ³•æ˜¯ `apply(T t)`ï¼Œå®ç°å°† T ç±»å‹çš„æ•°æ®è½¬æ¢ä¸º R ç±»å‹çš„æ•°æ®

### 3.2 åŸºæœ¬åº”ç”¨

è¿™ä¸ªæ¥å£åœ¨ Stream æµä¸­çš„ `map()` æ–¹æ³•å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œ`map()` æ–¹æ³•å®é™…ä¸Šå°±æ˜¯å°è£…çš„ Function æ¥å£ã€‚

```java
public class FunctionExample {
    public static void main(String[] args) {
        // åˆ›å»ºç”¨æˆ·åˆ—è¡¨
        List<User> users = new ArrayList<>();
        for (int i = 0; i < 3; i++) {
            users.add(new User(i + 1, "zs" + (i + 1), "ç¿»æ–—èŠ±å›­" + (i + 1) + "å·"));
        }
        
        // ä½¿ç”¨Functionæ¥å£æå–ç”¨æˆ·å
        users.stream()
             .map(User::getName)
             .forEach(System.out::println);
    }
}

class User {
    private Integer id;
    private String name;
    private String address;
    
    public User(Integer id, String name, String address) {
        this.id = id;
        this.name = name;
        this.address = address;
    }
    
    public String getName() {
        return name;
    }
}
```

### 3.3 è¿›é˜¶ä½¿ç”¨

#### 3.3.1 compose æ–¹æ³•

`compose()` æ–¹æ³•ç”¨äºå‡½æ•°ç»„åˆï¼Œå…ˆæ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼Œå†æ‰§è¡Œå½“å‰å‡½æ•°ï¼š

```java
public class FunctionComposeExample {
    public static void main(String[] args) {
        Function<String, String> addPrefix = s -> "Hello " + s;
        Function<String, String> addSuffix = s -> s + "!";
        
        // å…ˆæ‰§è¡ŒaddPrefixï¼Œå†æ‰§è¡ŒaddSuffix
        Function<String, String> combined = addSuffix.compose(addPrefix);
        
        String result = combined.apply("World");
        System.out.println(result); // è¾“å‡º: Hello World!
    }
}
```

#### 3.3.2 andThen æ–¹æ³•

`andThen()` æ–¹æ³•ä¹Ÿæ˜¯å‡½æ•°ç»„åˆï¼Œå…ˆæ‰§è¡Œå½“å‰å‡½æ•°ï¼Œå†æ‰§è¡Œä¼ å…¥çš„å‡½æ•°ï¼š

```java
public class FunctionAndThenExample {
    public static void main(String[] args) {
        Function<String, String> trim = String::trim;
        Function<String, String> toUpperCase = String::toUpperCase;
        Function<String, String> addExclamation = s -> s + "!";
        
        // å…ˆæ‰§è¡Œtrimï¼Œå†æ‰§è¡ŒtoUpperCaseï¼Œæœ€åæ‰§è¡ŒaddExclamation
        Function<String, String> pipeline = trim
            .andThen(toUpperCase)
            .andThen(addExclamation);
        
        String result = pipeline.apply("  hello world  ");
        System.out.println(result); // è¾“å‡º: HELLO WORLD!
    }
}
```

#### 3.3.3 identity æ–¹æ³•

`identity()` æ–¹æ³•è¿”å›ä¸€ä¸ªè¾“å…¥å’Œè¾“å‡ºç›¸åŒçš„å‡½æ•°ï¼š

```java
public class FunctionIdentityExample {
    public static void main(String[] args) {
        Function<String, String> identity = Function.identity();
        
        String result = identity.apply("Hello");
        System.out.println(result); // è¾“å‡º: Hello
        
        // åœ¨Streamä¸­çš„åº”ç”¨
        List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
        Map<String, String> nameMap = names.stream()
                                          .collect(Collectors.toMap(
                                              Function.identity(), // key
                                              Function.identity()  // value
                                          ));
        System.out.println(nameMap);
    }
}
```

---

## ğŸ½ï¸ Consumer æ¥å£è¯¦è§£

### 4.1 æ¥å£è¯´æ˜

`Consumer<T>` æ¥å£æ˜¯ä¸€ä¸ªæ¶ˆè´¹è€…æ¥å£ï¼Œå®ƒæ¥å—ä¸€ä¸ªæ³›å‹ç±»å‹å‚æ•°ï¼Œä½†ä¸è¿”å›ä»»ä½•å€¼ã€‚æ ¸å¿ƒæ–¹æ³•æ˜¯ `accept(T t)`ï¼Œç”¨äºæ‰§è¡ŒæŸä¸ªåŠ¨ä½œã€‚

### 4.2 åŸºæœ¬åº”ç”¨

```java
public class ConsumerExample {
    public static void main(String[] args) {
        List<String> names = Arrays.asList("Alice", "Bob", "Charlie");
        
        // ç®€å•æ¶ˆè´¹ï¼šæ‰“å°åå­—
        Consumer<String> printer = System.out::println;
        names.forEach(printer);
        
        // å¤æ‚æ¶ˆè´¹ï¼šæ ¼å¼åŒ–è¾“å‡º
        Consumer<String> formatter = name -> 
            System.out.println("Hello, " + name + "!");
        
        // ç»„åˆæ¶ˆè´¹ï¼šå…ˆæ‰“å°ï¼Œå†æ ¼å¼åŒ–
        Consumer<String> combined = printer.andThen(formatter);
        names.forEach(combined);
    }
}
```

### 4.3 è¿›é˜¶ä½¿ç”¨

#### 4.3.1 andThen æ–¹æ³•

`Consumer` æ¥å£çš„ `andThen()` æ–¹æ³•å¯ä»¥ç»„åˆå¤šä¸ªæ¶ˆè´¹è€…ï¼š

```java
public class ConsumerAdvancedExample {
    public static void main(String[] args) {
        Consumer<String> logConsumer = s -> System.out.println("æ—¥å¿—: " + s);
        Consumer<String> emailConsumer = s -> System.out.println("å‘é€é‚®ä»¶ç»™: " + s);
        Consumer<String> smsConsumer = s -> System.out.println("å‘é€çŸ­ä¿¡ç»™: " + s);
        
        // ç»„åˆå¤šä¸ªæ¶ˆè´¹è€…
        Consumer<String> notificationPipeline = logConsumer
            .andThen(emailConsumer)
            .andThen(smsConsumer);
        
        // æ‰§è¡Œå®Œæ•´çš„é€šçŸ¥æµç¨‹
        notificationPipeline.accept("Alice");
    }
}
```

---

## ğŸ­ Supplier æ¥å£è¯¦è§£

### 5.1 æ¥å£è¯´æ˜

`Supplier<T>` æ¥å£æ˜¯ä¸€ä¸ªç”Ÿäº§è€…æ¥å£ï¼Œå®ƒä¸æ¥å—ä»»ä½•å‚æ•°ï¼Œä½†è¿”å›ä¸€ä¸ªç»“æœã€‚æ ¸å¿ƒæ–¹æ³•æ˜¯ `get()`ï¼Œç”¨äºè·å–ç»“æœã€‚

### 5.2 åŸºæœ¬åº”ç”¨

```java
public class SupplierExample {
    public static void main(String[] args) {
        // ç”Ÿæˆéšæœºæ•°
        Supplier<Integer> randomNumber = () -> new Random().nextInt(100);
        System.out.println("éšæœºæ•°: " + randomNumber.get());
        
        // ç”Ÿæˆå½“å‰æ—¶é—´æˆ³
        Supplier<Long> timestamp = System::currentTimeMillis;
        System.out.println("æ—¶é—´æˆ³: " + timestamp.get());
        
        // ç”Ÿæˆé»˜è®¤ç”¨æˆ·
        Supplier<User> defaultUser = () -> new User(0, "Guest", "Unknown");
        User user = defaultUser.get();
        System.out.println("é»˜è®¤ç”¨æˆ·: " + user.getName());
        
        // æ‡’åŠ è½½ç¤ºä¾‹
        Supplier<ExpensiveObject> lazyLoader = () -> {
            System.out.println("åˆ›å»ºæ˜‚è´µçš„å¯¹è±¡...");
            return new ExpensiveObject();
        };
        
        // åªæœ‰åœ¨è°ƒç”¨get()æ—¶æ‰ä¼šåˆ›å»ºå¯¹è±¡
        ExpensiveObject obj = lazyLoader.get();
    }
}

class ExpensiveObject {
    public ExpensiveObject() {
        // æ¨¡æ‹Ÿæ˜‚è´µçš„åˆå§‹åŒ–è¿‡ç¨‹
        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
    }
}
```

---

## ğŸ” Predicate æ¥å£è¯¦è§£

### 6.1 æ¥å£è¯´æ˜

`Predicate<T>` æ¥å£æ˜¯ä¸€ä¸ªæ–­è¨€æ¥å£ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•°å¹¶è¿”å›å¸ƒå°”å€¼ã€‚æ ¸å¿ƒæ–¹æ³•æ˜¯ `test(T t)`ï¼Œç”¨äºåˆ¤æ–­æ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚

### 6.2 åŸºæœ¬åº”ç”¨

```java
public class PredicateExample {
    public static void main(String[] args) {
        List<String> names = Arrays.asList("Alice", "Bob", "Charlie", "David", "Eve");
        
        // åˆ¤æ–­å­—ç¬¦ä¸²é•¿åº¦æ˜¯å¦å¤§äº3
        Predicate<String> lengthGreaterThan3 = s -> s.length() > 3;
        
        // åˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦ä»¥Aå¼€å¤´
        Predicate<String> startsWithA = s -> s.startsWith("A");
        
        // ç»„åˆæ¡ä»¶ï¼šé•¿åº¦å¤§äº3 ä¸” ä»¥Aå¼€å¤´
        Predicate<String> combined = lengthGreaterThan3.and(startsWithA);
        
        // è¿‡æ»¤å¹¶æ‰“å°
        names.stream()
             .filter(combined)
             .forEach(System.out::println);
    }
}
```

### 6.3 è¿›é˜¶ä½¿ç”¨

#### 6.3.1 ç»„åˆæ“ä½œ

`Predicate` æ¥å£æä¾›äº†ä¸°å¯Œçš„ç»„åˆæ–¹æ³•ï¼š

```java
public class PredicateAdvancedExample {
    public static void main(String[] args) {
        List<String> names = Arrays.asList("Alice", "Bob", "Charlie", "David", "Eve");
        
        Predicate<String> notEmpty = s -> s != null && !s.trim().isEmpty();
        Predicate<String> minLength = s -> s.length() >= 3;
        Predicate<String> maxLength = s -> s.length() <= 10;
        Predicate<String> startsWithVowel = s -> "AEIOUaeiou".indexOf(s.charAt(0)) != -1;
        
        // ç»„åˆå¤šä¸ªæ¡ä»¶
        Predicate<String> complexCondition = notEmpty
            .and(minLength)
            .and(maxLength)
            .and(startsWithVowel.negate()); // ä¸ä»¥å…ƒéŸ³å¼€å¤´
        
        // åº”ç”¨å¤æ‚æ¡ä»¶
        List<String> filteredNames = names.stream()
                                         .filter(complexCondition)
                                         .collect(Collectors.toList());
        
        System.out.println("ç¬¦åˆæ¡ä»¶çš„åå­—: " + filteredNames);
    }
}
```

#### 6.3.2 åŠ¨æ€ç»„åˆ

```java
public class DynamicPredicateExample {
    public static void main(String[] args) {
        List<User> users = Arrays.asList(
            new User(1, "Alice", 25),
            new User(2, "Bob", 30),
            new User(3, "Charlie", 35),
            new User(4, "David", 28)
        );
        
        // åŠ¨æ€æ„å»ºæŸ¥è¯¢æ¡ä»¶
        List<Predicate<User>> conditions = new ArrayList<>();
        conditions.add(user -> user.getAge() >= 25);
        conditions.add(user -> user.getAge() <= 35);
        conditions.add(user -> user.getName().length() >= 4);
        
        // ç»„åˆæ‰€æœ‰æ¡ä»¶
        Predicate<User> finalCondition = conditions.stream()
                                                  .reduce(Predicate::and)
                                                  .orElse(user -> true);
        
        // åº”ç”¨æ¡ä»¶
        List<User> filteredUsers = users.stream()
                                       .filter(finalCondition)
                                       .collect(Collectors.toList());
        
        System.out.println("ç¬¦åˆæ¡ä»¶çš„ç”¨æˆ·: " + filteredUsers);
    }
}

class User {
    private Integer id;
    private String name;
    private Integer age;
    
    // æ„é€ å‡½æ•°å’Œgetteræ–¹æ³•...
    public User(Integer id, String name, Integer age) {
        this.id = id;
        this.name = name;
        this.age = age;
    }
    
    public Integer getAge() { return age; }
    public String getName() { return name; }
}
```

---

## ğŸ¯ å®é™…åº”ç”¨åœºæ™¯

### 1ï¸âƒ£ é›†åˆæ“ä½œå’Œæµå¤„ç†

```java
public class StreamOperationsExample {
    public static void main(String[] args) {
        List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10);
        
        // ä½¿ç”¨Functionè¿›è¡Œæ•°æ®è½¬æ¢
        List<String> numberStrings = numbers.stream()
                                           .map(Object::toString)
                                           .collect(Collectors.toList());
        
        // ä½¿ç”¨Predicateè¿›è¡Œæ•°æ®è¿‡æ»¤
        List<Integer> evenNumbers = numbers.stream()
                                          .filter(n -> n % 2 == 0)
                                          .collect(Collectors.toList());
        
        // ä½¿ç”¨Consumerè¿›è¡Œæ•°æ®æ¶ˆè´¹
        numbers.stream()
               .filter(n -> n > 5)
               .forEach(System.out::println);
        
        // ä½¿ç”¨Supplierç”Ÿæˆæ•°æ®
        Supplier<Double> randomSupplier = Math::random;
        List<Double> randomNumbers = Stream.generate(randomSupplier)
                                          .limit(5)
                                          .collect(Collectors.toList());
    }
}
```

### 2ï¸âƒ£ äº‹ä»¶å¤„ç†ç³»ç»Ÿ

```java
public class EventHandlingExample {
    public static void main(String[] args) {
        EventBus eventBus = new EventBus();
        
        // æ³¨å†Œäº‹ä»¶å¤„ç†å™¨
        eventBus.subscribe("user.login", user -> 
            System.out.println("ç”¨æˆ·ç™»å½•: " + user));
        
        eventBus.subscribe("user.logout", user -> 
            System.out.println("ç”¨æˆ·ç™»å‡º: " + user));
        
        eventBus.subscribe("user.login", user -> 
            System.out.println("è®°å½•ç™»å½•æ—¥å¿—: " + user));
        
        // å‘å¸ƒäº‹ä»¶
        eventBus.publish("user.login", "Alice");
        eventBus.publish("user.logout", "Alice");
    }
}

class EventBus {
    private final List<EventHandler> handlers = new ArrayList<>();
    
    public void subscribe(String eventType, Consumer<Object> handler) {
        handlers.add(new EventHandler(eventType, handler));
    }
    
    public void publish(String eventType, Object data) {
        handlers.stream()
               .filter(h -> h.eventType.equals(eventType))
               .forEach(h -> h.handler.accept(data));
    }
    
    private static class EventHandler {
        final String eventType;
        final Consumer<Object> handler;
        
        EventHandler(String eventType, Consumer<Object> handler) {
            this.eventType = eventType;
            this.handler = handler;
        }
    }
}
```

### 3ï¸âƒ£ ç­–ç•¥æ¨¡å¼å®ç°

```java
public class StrategyPatternExample {
    public static void main(String[] args) {
        List<Integer> numbers = Arrays.asList(1, 2, 3, 4, 5);
        
        // ä¸åŒçš„è®¡ç®—ç­–ç•¥
        Function<List<Integer>, Integer> sumStrategy = list -> 
            list.stream().mapToInt(Integer::intValue).sum();
        
        Function<List<Integer>, Integer> productStrategy = list -> 
            list.stream().reduce(1, (a, b) -> a * b);
        
        Function<List<Integer>, Integer> maxStrategy = list -> 
            list.stream().mapToInt(Integer::intValue).max().orElse(0);
        
        // ä½¿ç”¨ç­–ç•¥
        Calculator calculator = new Calculator();
        
        System.out.println("æ±‚å’Œç­–ç•¥: " + calculator.calculate(numbers, sumStrategy));
        System.out.println("ä¹˜ç§¯ç­–ç•¥: " + calculator.calculate(numbers, productStrategy));
        System.out.println("æœ€å¤§å€¼ç­–ç•¥: " + calculator.calculate(numbers, maxStrategy));
    }
}

class Calculator {
    public <T, R> R calculate(List<T> data, Function<List<T>, R> strategy) {
        return strategy.apply(data);
    }
}
```

### 4ï¸âƒ£ æ•°æ®éªŒè¯ç³»ç»Ÿ

```java
public class ValidationSystemExample {
    public static void main(String[] args) {
        // åˆ›å»ºéªŒè¯å™¨
        Validator<String> notEmpty = s -> s != null && !s.trim().isEmpty();
        Validator<String> minLength = s -> s.length() >= 3;
        Validator<String> maxLength = s -> s.length() <= 20;
        Validator<String> noSpecialChars = s -> s.matches("^[a-zA-Z0-9\\s]+$");
        
        // ç»„åˆéªŒè¯å™¨
        Validator<String> usernameValidator = notEmpty
            .and(minLength)
            .and(maxLength)
            .and(noSpecialChars);
        
        // æµ‹è¯•éªŒè¯
        String[] testUsernames = {"", "ab", "validUsername", "invalid@username", "veryLongUsernameThatExceedsLimit"};
        
        for (String username : testUsernames) {
            boolean isValid = usernameValidator.isValid(username);
            System.out.println("ç”¨æˆ·å '" + username + "' æ˜¯å¦æœ‰æ•ˆ: " + isValid);
        }
    }
}

@FunctionalInterface
interface Validator<T> {
    boolean isValid(T value);
    
    default Validator<T> and(Validator<T> other) {
        return value -> this.isValid(value) && other.isValid(value);
    }
    
    default Validator<T> or(Validator<T> other) {
        return value -> this.isValid(value) || other.isValid(value);
    }
    
    default Validator<T> not() {
        return value -> !this.isValid(value);
    }
}
```

---

## ğŸš€ è¿›é˜¶æŠ€å·§

### 1ï¸âƒ£ å‡½æ•°ç»„åˆå’Œç®¡é“

```java
public class FunctionPipelineExample {
    public static void main(String[] args) {
        // åˆ›å»ºå¤„ç†ç®¡é“
        Function<String, String> pipeline = createTextProcessingPipeline();
        
        String result = pipeline.apply("  hello world  ");
        System.out.println("å¤„ç†ç»“æœ: " + result);
    }
    
    private static Function<String, String> createTextProcessingPipeline() {
        return Function.<String>identity()
            .andThen(String::trim)
            .andThen(String::toLowerCase)
            .andThen(s -> s.replaceAll("\\s+", " "))
            .andThen(s -> s.substring(0, 1).toUpperCase() + s.substring(1))
            .andThen(s -> s + "!");
    }
}
```

### 2ï¸âƒ£ æ¡ä»¶å‡½æ•°

```java
public class ConditionalFunctionExample {
    public static void main(String[] args) {
        // æ ¹æ®æ¡ä»¶é€‰æ‹©ä¸åŒçš„å¤„ç†å‡½æ•°
        Function<String, String> conditionalProcessor = createConditionalProcessor();
        
        System.out.println(conditionalProcessor.apply("short"));      // è¾“å‡º: SHORT
        System.out.println(conditionalProcessor.apply("very long text")); // è¾“å‡º: very long text
    }
    
    private static Function<String, String> createConditionalProcessor() {
        return text -> {
            if (text.length() < 10) {
                return text.toUpperCase();
            } else {
                return text.toLowerCase();
            }
        };
    }
}
```

### 3ï¸âƒ£ ç¼“å­˜å’Œè®°å¿†åŒ–

```java
public class MemoizationExample {
    public static void main(String[] args) {
        // åˆ›å»ºå¸¦ç¼“å­˜çš„å‡½æ•°
        Function<Integer, Long> cachedFactorial = memoize(MemoizationExample::factorial);
        
        // ç¬¬ä¸€æ¬¡è®¡ç®—
        long start = System.currentTimeMillis();
        long result1 = cachedFactorial.apply(20);
        long time1 = System.currentTimeMillis() - start;
        
        // ç¬¬äºŒæ¬¡è®¡ç®—ï¼ˆä»ç¼“å­˜è·å–ï¼‰
        start = System.currentTimeMillis();
        long result2 = cachedFactorial.apply(20);
        long time2 = System.currentTimeMillis() - start;
        
        System.out.println("ç»“æœ: " + result1);
        System.out.println("ç¬¬ä¸€æ¬¡è®¡ç®—æ—¶é—´: " + time1 + "ms");
        System.out.println("ç¬¬äºŒæ¬¡è®¡ç®—æ—¶é—´: " + time2 + "ms");
    }
    
    private static long factorial(int n) {
        if (n <= 1) return 1;
        return n * factorial(n - 1);
    }
    
    private static <T, R> Function<T, R> memoize(Function<T, R> function) {
        Map<T, R> cache = new ConcurrentHashMap<>();
        return input -> cache.computeIfAbsent(input, function);
    }
}
```

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1ï¸âƒ£ å‘½åè§„èŒƒ

```java
// âœ… å¥½çš„å‘½å
Function<String, Integer> stringToLength = String::length;
Predicate<String> isNotEmpty = s -> s != null && !s.isEmpty();
Consumer<String> logMessage = System.out::println;
Supplier<User> defaultUserFactory = () -> new User("Guest", "guest@example.com");

// âŒ ä¸å¥½çš„å‘½å
Function<String, Integer> f = String::length;
Predicate<String> p = s -> s != null && !s.isEmpty();
Consumer<String> c = System.out::println;
```

### 2ï¸âƒ£ é¿å…å‰¯ä½œç”¨

```java
// âœ… å¥½çš„åšæ³•ï¼šçº¯å‡½æ•°
Function<Integer, Integer> square = x -> x * x;
Predicate<String> isValid = s -> s != null && s.length() > 0;

// âŒ ä¸å¥½çš„åšæ³•ï¼šæœ‰å‰¯ä½œç”¨
List<String> names = new ArrayList<>();
Consumer<String> badConsumer = name -> {
    names.add(name); // ä¿®æ”¹å¤–éƒ¨çŠ¶æ€
    System.out.println("Added: " + name); // äº§ç”Ÿå‰¯ä½œç”¨
};
```

### 3ï¸âƒ£ åˆç†ä½¿ç”¨ç±»å‹æ¨æ–­

```java
// âœ… è®©ç¼–è¯‘å™¨æ¨æ–­ç±»å‹
Function<String, Integer> length = String::length;
Predicate<String> isEmpty = String::isEmpty;

// âŒ è¿‡åº¦æŒ‡å®šç±»å‹
Function<String, Integer> length = (String s) -> s.length();
Predicate<String> isEmpty = (String s) -> s.isEmpty();
```

### 4ï¸âƒ£ æ€§èƒ½ä¼˜åŒ–

```java
public class PerformanceOptimizationExample {
    public static void main(String[] args) {
        // å¯¹äºåŸºæœ¬ç±»å‹ï¼Œä½¿ç”¨ä¸“é—¨çš„å‡½æ•°å¼æ¥å£
        // âŒ è£…ç®±/æ‹†ç®±å¼€é”€
        Function<String, Integer> boxed = String::length;
        
        // âœ… é¿å…è£…ç®±/æ‹†ç®±
        ToIntFunction<String> unboxed = String::length;
        
        // ç¼“å­˜æ˜‚è´µçš„è®¡ç®—
        Function<Integer, BigInteger> cachedPower = memoize(n -> BigInteger.valueOf(2).pow(n));
        
        System.out.println("2^100 = " + cachedPower.apply(100));
    }
    
    private static <T, R> Function<T, R> memoize(Function<T, R> function) {
        Map<T, R> cache = new ConcurrentHashMap<>();
        return input -> cache.computeIfAbsent(input, function);
    }
}
```

---

## ğŸ” å¸¸è§é™·é˜±å’Œè§£å†³æ–¹æ¡ˆ

### 1ï¸âƒ£ å˜é‡æ•è·é—®é¢˜

```java
public class VariableCaptureExample {
    public static void main(String[] args) {
        // âœ… æ­£ç¡®ï¼šeffectively final å˜é‡
        String message = "Hello";
        Runnable task = () -> System.out.println(message);
        task.run();
        
        // âŒ é”™è¯¯ï¼šä¿®æ”¹è¢«æ•è·çš„å˜é‡
        // String message = "Hello";
        // Runnable task = () -> System.out.println(message);
        // message = "World"; // ç¼–è¯‘é”™è¯¯
        
        // âœ… è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æ•°ç»„æˆ–åŒ…è£…ç±»
        final String[] messageArray = {"Hello"};
        Runnable task2 = () -> System.out.println(messageArray[0]);
        messageArray[0] = "World"; // å¯ä»¥ä¿®æ”¹æ•°ç»„å†…å®¹
        task2.run();
    }
}
```

### 2ï¸âƒ£ å¼‚å¸¸å¤„ç†

```java
public class ExceptionHandlingExample {
    public static void main(String[] args) {
        // âŒ é—®é¢˜ï¼šLambda ä¸­æŠ›å‡ºå—æ£€å¼‚å¸¸
        // Function<String, Integer> parser = s -> Integer.parseInt(s); // ç¼–è¯‘é”™è¯¯
        
        // âœ… è§£å†³æ–¹æ¡ˆï¼šåŒ…è£…å¼‚å¸¸
        Function<String, Integer> parser = s -> {
            try {
                return Integer.parseInt(s);
            } catch (NumberFormatException e) {
                throw new RuntimeException(e);
            }
        };
        
        try {
            int result = parser.apply("123");
            System.out.println("è§£æç»“æœ: " + result);
        } catch (Exception e) {
            System.err.println("è§£æå¤±è´¥: " + e.getMessage());
        }
    }
}
```

### 3ï¸âƒ£ ç©ºæŒ‡é’ˆå¤„ç†

```java
public class NullSafetyExample {
    public static void main(String[] args) {
        // å®‰å…¨çš„å­—ç¬¦ä¸²å¤„ç†
        Function<String, String> safeProcessor = s -> {
            if (s == null) return "null";
            return s.trim().toUpperCase();
        };
        
        // å®‰å…¨çš„é›†åˆå¤„ç†
        Predicate<Collection<?>> isEmpty = collection -> 
            collection == null || collection.isEmpty();
        
        // æµ‹è¯•
        System.out.println(safeProcessor.apply("  hello  ")); // HELLO
        System.out.println(safeProcessor.apply(null));        // null
        System.out.println(isEmpty.test(Arrays.asList(1, 2, 3))); // false
        System.out.println(isEmpty.test(null));                    // true
    }
}
```

---

## ğŸ“š æ€»ç»“

å‡½æ•°å¼æ¥å£æ˜¯ Java 8 å¼•å…¥çš„é‡è¦ç‰¹æ€§ï¼Œå®ƒä¸º Java å¸¦æ¥äº†å‡½æ•°å¼ç¼–ç¨‹çš„èƒ½åŠ›ã€‚é€šè¿‡æœ¬æ–‡çš„å­¦ä¹ ï¼Œä½ åº”è¯¥æŒæ¡ï¼š

### ğŸ¯ æ ¸å¿ƒæ¦‚å¿µ
- å‡½æ•°å¼æ¥å£çš„å®šä¹‰å’Œç‰¹å¾
- å››ç§ä¸»è¦å‡½æ•°å¼æ¥å£çš„ä½¿ç”¨
- æ–¹æ³•å¼•ç”¨çš„å„ç§å½¢å¼

### ğŸ› ï¸ å®ç”¨æŠ€èƒ½
- Lambda è¡¨è¾¾å¼çš„è¯­æ³•å’Œç”¨æ³•
- å‡½æ•°ç»„åˆå’Œé“¾å¼è°ƒç”¨
- åŠ¨æ€æ¡ä»¶æ„å»º

### ğŸ’¡ æœ€ä½³å®è·µ
- åˆç†çš„å‘½åè§„èŒƒ
- é¿å…å‰¯ä½œç”¨
- æ€§èƒ½ä¼˜åŒ–æŠ€å·§
- å¼‚å¸¸å¤„ç†æ–¹æ¡ˆ

### ğŸš€ åº”ç”¨åœºæ™¯
- é›†åˆæ“ä½œå’Œæµå¤„ç†
- äº‹ä»¶å¤„ç†å’Œå›è°ƒ
- ç­–ç•¥æ¨¡å¼å’Œæ¨¡æ¿æ–¹æ³•
- æ•°æ®éªŒè¯å’Œè½¬æ¢
- ç¼“å­˜å’Œè®°å¿†åŒ–

### ğŸŒŸ è¿›é˜¶ç‰¹æ€§
- å‡½æ•°ç»„åˆå’Œç®¡é“
- æ¡ä»¶å‡½æ•°
- åŠ¨æ€éªŒè¯å™¨
- æ€§èƒ½ä¼˜åŒ–

å‡½æ•°å¼æ¥å£è®© Java ä»£ç æ›´åŠ ç®€æ´ã€å¯è¯»å’Œå¯ç»´æŠ¤ï¼Œæ˜¯ç°ä»£ Java å¼€å‘ä¸­ä¸å¯æˆ–ç¼ºçš„å·¥å…·ã€‚æŒæ¡è¿™äº›æ¦‚å¿µå’ŒæŠ€å·§ï¼Œå°†å¤§å¤§æå‡ä½ çš„ç¼–ç¨‹èƒ½åŠ›å’Œä»£ç è´¨é‡ï¼

---

> ğŸ’¡ **æç¤º**ï¼šå®è·µæ˜¯æœ€å¥½çš„å­¦ä¹ æ–¹å¼ï¼å»ºè®®ä½ å°è¯•è¿è¡Œæœ¬æ–‡ä¸­çš„ä»£ç ç¤ºä¾‹ï¼Œå¹¶æ ¹æ®è‡ªå·±çš„é¡¹ç›®éœ€æ±‚åˆ›å»ºè‡ªå®šä¹‰çš„å‡½æ•°å¼æ¥å£ã€‚

---

**å‚è€ƒèµ„æ–™ï¼š**
- [Java 8 å®˜æ–¹æ–‡æ¡£](https://docs.oracle.com/javase/8/docs/api/java/util/function/package-summary.html)
- [Java Lambda è¡¨è¾¾å¼æ•™ç¨‹](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)
- [å‡½æ•°å¼ç¼–ç¨‹æœ€ä½³å®è·µ](https://www.baeldung.com/java-functional-programming)
- [CSDN - å‡½æ•°å¼æ¥å£è¯¦è§£](https://blog.csdn.net/qq_14962815/article/details/135211258) 